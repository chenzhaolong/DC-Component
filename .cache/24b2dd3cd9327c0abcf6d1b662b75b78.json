{"dependencies":[{"name":"babel-runtime/helpers/typeof","loc":{"line":1,"column":20}},{"name":"babel-runtime/helpers/defineProperty","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/extends","loc":{"line":3,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":4,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":5,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":6,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":7,"column":22}},{"name":"react","loc":{"line":16,"column":23}},{"name":"react-dom","loc":{"line":17,"column":26}},{"name":"rc-table","loc":{"line":18,"column":20}},{"name":"prop-types","loc":{"line":19,"column":22}},{"name":"classnames","loc":{"line":20,"column":23}},{"name":"../pagination","loc":{"line":21,"column":23}},{"name":"../icon","loc":{"line":22,"column":17}},{"name":"../spin","loc":{"line":23,"column":17}},{"name":"../locale-provider/LocaleReceiver","loc":{"line":24,"column":27}},{"name":"../locale-provider/default","loc":{"line":25,"column":26}},{"name":"../_util/warning","loc":{"line":26,"column":20}},{"name":"./filterDropdown","loc":{"line":27,"column":27}},{"name":"./createStore","loc":{"line":28,"column":24}},{"name":"./SelectionBox","loc":{"line":29,"column":25}},{"name":"./SelectionCheckboxAll","loc":{"line":30,"column":33}},{"name":"./Column","loc":{"line":31,"column":19}},{"name":"./ColumnGroup","loc":{"line":32,"column":24}},{"name":"./createBodyRow","loc":{"line":33,"column":26}},{"name":"./util","loc":{"line":34,"column":65}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _defineProperty2 = require(\"babel-runtime/helpers/defineProperty\");\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar ReactDOM = _interopRequireWildcard(_reactDom);\n\nvar _rcTable = require(\"rc-table\");\n\nvar _rcTable2 = _interopRequireDefault(_rcTable);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require(\"classnames\");\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _pagination = require(\"../pagination\");\n\nvar _pagination2 = _interopRequireDefault(_pagination);\n\nvar _icon = require(\"../icon\");\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nvar _spin = require(\"../spin\");\n\nvar _spin2 = _interopRequireDefault(_spin);\n\nvar _LocaleReceiver = require(\"../locale-provider/LocaleReceiver\");\n\nvar _LocaleReceiver2 = _interopRequireDefault(_LocaleReceiver);\n\nvar _default = require(\"../locale-provider/default\");\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _warning = require(\"../_util/warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _filterDropdown = require(\"./filterDropdown\");\n\nvar _filterDropdown2 = _interopRequireDefault(_filterDropdown);\n\nvar _createStore = require(\"./createStore\");\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _SelectionBox = require(\"./SelectionBox\");\n\nvar _SelectionBox2 = _interopRequireDefault(_SelectionBox);\n\nvar _SelectionCheckboxAll = require(\"./SelectionCheckboxAll\");\n\nvar _SelectionCheckboxAll2 = _interopRequireDefault(_SelectionCheckboxAll);\n\nvar _Column = require(\"./Column\");\n\nvar _Column2 = _interopRequireDefault(_Column);\n\nvar _ColumnGroup = require(\"./ColumnGroup\");\n\nvar _ColumnGroup2 = _interopRequireDefault(_ColumnGroup);\n\nvar _createBodyRow = require(\"./createBodyRow\");\n\nvar _createBodyRow2 = _interopRequireDefault(_createBodyRow);\n\nvar _util = require(\"./util\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }return t;\n};\n\nfunction noop() {}\nfunction stopPropagation(e) {\n  e.stopPropagation();\n  if (e.nativeEvent.stopImmediatePropagation) {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n}\nvar defaultPagination = {\n  onChange: noop,\n  onShowSizeChange: noop\n};\n/**\n * Avoid creating new object, so that parent component's shouldComponentUpdate\n * can works appropriately。\n */\nvar emptyObject = {};\n\nvar Table = function (_React$Component) {\n  (0, _inherits3.default)(Table, _React$Component);\n\n  function Table(props) {\n    (0, _classCallCheck3.default)(this, Table);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Table.__proto__ || Object.getPrototypeOf(Table)).call(this, props));\n\n    _this.getCheckboxPropsByItem = function (item, index) {\n      var _this$props$rowSelect = _this.props.rowSelection,\n          rowSelection = _this$props$rowSelect === undefined ? {} : _this$props$rowSelect;\n\n      if (!rowSelection.getCheckboxProps) {\n        return {};\n      }\n      var key = _this.getRecordKey(item, index);\n      // Cache checkboxProps\n      if (!_this.CheckboxPropsCache[key]) {\n        _this.CheckboxPropsCache[key] = rowSelection.getCheckboxProps(item);\n      }\n      return _this.CheckboxPropsCache[key];\n    };\n    _this.onRow = function (record, index) {\n      var _this$props = _this.props,\n          onRow = _this$props.onRow,\n          prefixCls = _this$props.prefixCls;\n\n      var custom = onRow ? onRow(record, index) : {};\n      return (0, _extends3.default)({}, custom, { prefixCls: prefixCls, store: _this.store, rowKey: _this.getRecordKey(record, index) });\n    };\n    _this.handleFilter = function (column, nextFilters) {\n      var props = _this.props;\n      var pagination = (0, _extends3.default)({}, _this.state.pagination);\n      var filters = (0, _extends3.default)({}, _this.state.filters, (0, _defineProperty3.default)({}, _this.getColumnKey(column), nextFilters));\n      // Remove filters not in current columns\n      var currentColumnKeys = [];\n      (0, _util.treeMap)(_this.columns, function (c) {\n        if (!c.children) {\n          currentColumnKeys.push(_this.getColumnKey(c));\n        }\n      });\n      Object.keys(filters).forEach(function (columnKey) {\n        if (currentColumnKeys.indexOf(columnKey) < 0) {\n          delete filters[columnKey];\n        }\n      });\n      if (props.pagination) {\n        // Reset current prop\n        pagination.current = 1;\n        pagination.onChange(pagination.current);\n      }\n      var newState = {\n        pagination: pagination,\n        filters: {}\n      };\n      var filtersToSetState = (0, _extends3.default)({}, filters);\n      // Remove filters which is controlled\n      _this.getFilteredValueColumns().forEach(function (col) {\n        var columnKey = _this.getColumnKey(col);\n        if (columnKey) {\n          delete filtersToSetState[columnKey];\n        }\n      });\n      if (Object.keys(filtersToSetState).length > 0) {\n        newState.filters = filtersToSetState;\n      }\n      // Controlled current prop will not respond user interaction\n      if ((0, _typeof3.default)(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = (0, _extends3.default)({}, pagination, { current: _this.state.pagination.current });\n      }\n      _this.setState(newState, function () {\n        _this.store.setState({\n          selectionDirty: false\n        });\n        var onChange = _this.props.onChange;\n        if (onChange) {\n          onChange.apply(null, _this.prepareParamsArguments((0, _extends3.default)({}, _this.state, { selectionDirty: false, filters: filters,\n            pagination: pagination })));\n        }\n      });\n    };\n    _this.handleSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n      var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n      var key = _this.getRecordKey(record, rowIndex);\n      if (checked) {\n        selectedRowKeys.push(_this.getRecordKey(record, rowIndex));\n      } else {\n        selectedRowKeys = selectedRowKeys.filter(function (i) {\n          return key !== i;\n        });\n      }\n      _this.store.setState({\n        selectionDirty: true\n      });\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: 'onSelect',\n        record: record,\n        checked: checked\n      });\n    };\n    _this.handleRadioSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n      var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n      var key = _this.getRecordKey(record, rowIndex);\n      selectedRowKeys = [key];\n      _this.store.setState({\n        selectionDirty: true\n      });\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: 'onSelect',\n        record: record,\n        checked: checked\n      });\n    };\n    _this.handleSelectRow = function (selectionKey, index, onSelectFunc) {\n      var data = _this.getFlatCurrentPageData();\n      var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n      var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n      var changeableRowKeys = data.filter(function (item, i) {\n        return !_this.getCheckboxPropsByItem(item, i).disabled;\n      }).map(function (item, i) {\n        return _this.getRecordKey(item, i);\n      });\n      var changeRowKeys = [];\n      var selectWay = '';\n      var checked = void 0;\n      // handle default selection\n      switch (selectionKey) {\n        case 'all':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = true;\n          break;\n        case 'removeAll':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) >= 0) {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = false;\n          break;\n        case 'invert':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n            } else {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n            }\n            changeRowKeys.push(key);\n            selectWay = 'onSelectInvert';\n          });\n          break;\n        default:\n          break;\n      }\n      _this.store.setState({\n        selectionDirty: true\n      });\n      // when select custom selection, callback selections[n].onSelect\n      var rowSelection = _this.props.rowSelection;\n\n      var customSelectionStartIndex = 2;\n      if (rowSelection && rowSelection.hideDefaultSelections) {\n        customSelectionStartIndex = 0;\n      }\n      if (index >= customSelectionStartIndex && typeof onSelectFunc === 'function') {\n        return onSelectFunc(changeableRowKeys);\n      }\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: selectWay,\n        checked: checked,\n        changeRowKeys: changeRowKeys\n      });\n    };\n    _this.handlePageChange = function (current) {\n      for (var _len = arguments.length, otherArguments = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        otherArguments[_key - 1] = arguments[_key];\n      }\n\n      var props = _this.props;\n      var pagination = (0, _extends3.default)({}, _this.state.pagination);\n      if (current) {\n        pagination.current = current;\n      } else {\n        pagination.current = pagination.current || 1;\n      }\n      pagination.onChange.apply(pagination, [pagination.current].concat(otherArguments));\n      var newState = {\n        pagination: pagination\n      };\n      // Controlled current prop will not respond user interaction\n      if (props.pagination && (0, _typeof3.default)(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = (0, _extends3.default)({}, pagination, { current: _this.state.pagination.current });\n      }\n      _this.setState(newState);\n      _this.store.setState({\n        selectionDirty: false\n      });\n      var onChange = _this.props.onChange;\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments((0, _extends3.default)({}, _this.state, { selectionDirty: false, pagination: pagination })));\n      }\n    };\n    _this.renderSelectionBox = function (type) {\n      return function (_, record, index) {\n        var rowIndex = _this.getRecordKey(record, index); // 从 1 开始\n        var props = _this.getCheckboxPropsByItem(record, index);\n        var handleChange = function handleChange(e) {\n          type === 'radio' ? _this.handleRadioSelect(record, rowIndex, e) : _this.handleSelect(record, rowIndex, e);\n        };\n        return React.createElement('span', { onClick: stopPropagation }, React.createElement(_SelectionBox2.default, { type: type, store: _this.store, rowIndex: rowIndex, disabled: props.disabled, onChange: handleChange, defaultSelection: _this.getDefaultSelection() }));\n      };\n    };\n    _this.getRecordKey = function (record, index) {\n      var rowKey = _this.props.rowKey;\n      var recordKey = typeof rowKey === 'function' ? rowKey(record, index) : record[rowKey];\n      (0, _warning2.default)(recordKey !== undefined, 'Each record in dataSource of table should have a unique `key` prop, or set `rowKey` to an unique primary key,' + 'see https://u.ant.design/table-row-key');\n      return recordKey === undefined ? index : recordKey;\n    };\n    _this.getPopupContainer = function () {\n      return ReactDOM.findDOMNode(_this);\n    };\n    _this.handleShowSizeChange = function (current, pageSize) {\n      var pagination = _this.state.pagination;\n      pagination.onShowSizeChange(current, pageSize);\n      var nextPagination = (0, _extends3.default)({}, pagination, { pageSize: pageSize,\n        current: current });\n      _this.setState({ pagination: nextPagination });\n      var onChange = _this.props.onChange;\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments((0, _extends3.default)({}, _this.state, { pagination: nextPagination })));\n      }\n    };\n    _this.renderTable = function (contextLocale) {\n      var _classNames;\n\n      var locale = (0, _extends3.default)({}, contextLocale, _this.props.locale);\n      var _a = _this.props,\n          style = _a.style,\n          className = _a.className,\n          prefixCls = _a.prefixCls,\n          showHeader = _a.showHeader,\n          restProps = __rest(_a, [\"style\", \"className\", \"prefixCls\", \"showHeader\"]);\n      var data = _this.getCurrentPageData();\n      var expandIconAsCell = _this.props.expandedRowRender && _this.props.expandIconAsCell !== false;\n      var classString = (0, _classnames2.default)((_classNames = {}, (0, _defineProperty3.default)(_classNames, prefixCls + '-' + _this.props.size, true), (0, _defineProperty3.default)(_classNames, prefixCls + '-bordered', _this.props.bordered), (0, _defineProperty3.default)(_classNames, prefixCls + '-empty', !data.length), (0, _defineProperty3.default)(_classNames, prefixCls + '-without-column-header', !showHeader), _classNames));\n      var columns = _this.renderRowSelection(locale);\n      columns = _this.renderColumnsDropdown(columns, locale);\n      columns = columns.map(function (column, i) {\n        var newColumn = (0, _extends3.default)({}, column);\n        newColumn.key = _this.getColumnKey(newColumn, i);\n        return newColumn;\n      });\n      var expandIconColumnIndex = columns[0] && columns[0].key === 'selection-column' ? 1 : 0;\n      if ('expandIconColumnIndex' in restProps) {\n        expandIconColumnIndex = restProps.expandIconColumnIndex;\n      }\n      return React.createElement(_rcTable2.default, (0, _extends3.default)({ key: 'table' }, restProps, { onRow: _this.onRow, components: _this.components, prefixCls: prefixCls, data: data, columns: columns, showHeader: showHeader, className: classString, expandIconColumnIndex: expandIconColumnIndex, expandIconAsCell: expandIconAsCell, emptyText: function emptyText() {\n          return locale.emptyText;\n        } }));\n    };\n    (0, _warning2.default)(!('columnsPageRange' in props || 'columnsPageSize' in props), '`columnsPageRange` and `columnsPageSize` are removed, please use ' + 'fixed columns instead, see: https://u.ant.design/fixed-columns.');\n    _this.columns = props.columns || (0, _util.normalizeColumns)(props.children);\n    _this.createComponents(props.components);\n    _this.state = (0, _extends3.default)({}, _this.getDefaultSortOrder(_this.columns), {\n      // 减少状态\n      filters: _this.getFiltersFromColumns(), pagination: _this.getDefaultPagination(props) });\n    _this.CheckboxPropsCache = {};\n    _this.store = (0, _createStore2.default)({\n      selectedRowKeys: (props.rowSelection || {}).selectedRowKeys || [],\n      selectionDirty: false\n    });\n    return _this;\n  }\n\n  (0, _createClass3.default)(Table, [{\n    key: 'getDefaultSelection',\n    value: function getDefaultSelection() {\n      var _this2 = this;\n\n      var _props$rowSelection = this.props.rowSelection,\n          rowSelection = _props$rowSelection === undefined ? {} : _props$rowSelection;\n\n      if (!rowSelection.getCheckboxProps) {\n        return [];\n      }\n      return this.getFlatData().filter(function (item, rowIndex) {\n        return _this2.getCheckboxPropsByItem(item, rowIndex).defaultChecked;\n      }).map(function (record, rowIndex) {\n        return _this2.getRecordKey(record, rowIndex);\n      });\n    }\n  }, {\n    key: 'getDefaultPagination',\n    value: function getDefaultPagination(props) {\n      var pagination = props.pagination || {};\n      return this.hasPagination(props) ? (0, _extends3.default)({}, defaultPagination, pagination, { current: pagination.defaultCurrent || pagination.current || 1, pageSize: pagination.defaultPageSize || pagination.pageSize || 10 }) : {};\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      this.columns = nextProps.columns || (0, _util.normalizeColumns)(nextProps.children);\n      if ('pagination' in nextProps || 'pagination' in this.props) {\n        this.setState(function (previousState) {\n          var newPagination = (0, _extends3.default)({}, defaultPagination, previousState.pagination, nextProps.pagination);\n          newPagination.current = newPagination.current || 1;\n          newPagination.pageSize = newPagination.pageSize || 10;\n          return { pagination: nextProps.pagination !== false ? newPagination : emptyObject };\n        });\n      }\n      if (nextProps.rowSelection && 'selectedRowKeys' in nextProps.rowSelection) {\n        this.store.setState({\n          selectedRowKeys: nextProps.rowSelection.selectedRowKeys || []\n        });\n        var rowSelection = this.props.rowSelection;\n\n        if (rowSelection && nextProps.rowSelection.getCheckboxProps !== rowSelection.getCheckboxProps) {\n          this.CheckboxPropsCache = {};\n        }\n      }\n      if ('dataSource' in nextProps && nextProps.dataSource !== this.props.dataSource) {\n        this.store.setState({\n          selectionDirty: false\n        });\n        this.CheckboxPropsCache = {};\n      }\n      if (this.getSortOrderColumns(this.columns).length > 0) {\n        var sortState = this.getSortStateFromColumns(this.columns);\n        if (sortState.sortColumn !== this.state.sortColumn || sortState.sortOrder !== this.state.sortOrder) {\n          this.setState(sortState);\n        }\n      }\n      var filteredValueColumns = this.getFilteredValueColumns(this.columns);\n      if (filteredValueColumns.length > 0) {\n        var filtersFromColumns = this.getFiltersFromColumns(this.columns);\n        var newFilters = (0, _extends3.default)({}, this.state.filters);\n        Object.keys(filtersFromColumns).forEach(function (key) {\n          newFilters[key] = filtersFromColumns[key];\n        });\n        if (this.isFiltersChanged(newFilters)) {\n          this.setState({ filters: newFilters });\n        }\n      }\n      this.createComponents(nextProps.components, this.props.components);\n    }\n  }, {\n    key: 'setSelectedRowKeys',\n    value: function setSelectedRowKeys(selectedRowKeys, _ref) {\n      var _this3 = this;\n\n      var selectWay = _ref.selectWay,\n          record = _ref.record,\n          checked = _ref.checked,\n          changeRowKeys = _ref.changeRowKeys;\n      var _props$rowSelection2 = this.props.rowSelection,\n          rowSelection = _props$rowSelection2 === undefined ? {} : _props$rowSelection2;\n\n      if (rowSelection && !('selectedRowKeys' in rowSelection)) {\n        this.store.setState({ selectedRowKeys: selectedRowKeys });\n      }\n      var data = this.getFlatData();\n      if (!rowSelection.onChange && !rowSelection[selectWay]) {\n        return;\n      }\n      var selectedRows = data.filter(function (row, i) {\n        return selectedRowKeys.indexOf(_this3.getRecordKey(row, i)) >= 0;\n      });\n      if (rowSelection.onChange) {\n        rowSelection.onChange(selectedRowKeys, selectedRows);\n      }\n      if (selectWay === 'onSelect' && rowSelection.onSelect) {\n        rowSelection.onSelect(record, checked, selectedRows);\n      } else if (selectWay === 'onSelectAll' && rowSelection.onSelectAll) {\n        var changeRows = data.filter(function (row, i) {\n          return changeRowKeys.indexOf(_this3.getRecordKey(row, i)) >= 0;\n        });\n        rowSelection.onSelectAll(checked, selectedRows, changeRows);\n      } else if (selectWay === 'onSelectInvert' && rowSelection.onSelectInvert) {\n        rowSelection.onSelectInvert(selectedRowKeys);\n      }\n    }\n  }, {\n    key: 'hasPagination',\n    value: function hasPagination(props) {\n      return (props || this.props).pagination !== false;\n    }\n  }, {\n    key: 'isFiltersChanged',\n    value: function isFiltersChanged(filters) {\n      var _this4 = this;\n\n      var filtersChanged = false;\n      if (Object.keys(filters).length !== Object.keys(this.state.filters).length) {\n        filtersChanged = true;\n      } else {\n        Object.keys(filters).forEach(function (columnKey) {\n          if (filters[columnKey] !== _this4.state.filters[columnKey]) {\n            filtersChanged = true;\n          }\n        });\n      }\n      return filtersChanged;\n    }\n  }, {\n    key: 'getSortOrderColumns',\n    value: function getSortOrderColumns(columns) {\n      return (0, _util.flatFilter)(columns || this.columns || [], function (column) {\n        return 'sortOrder' in column;\n      });\n    }\n  }, {\n    key: 'getFilteredValueColumns',\n    value: function getFilteredValueColumns(columns) {\n      return (0, _util.flatFilter)(columns || this.columns || [], function (column) {\n        return typeof column.filteredValue !== 'undefined';\n      });\n    }\n  }, {\n    key: 'getFiltersFromColumns',\n    value: function getFiltersFromColumns(columns) {\n      var _this5 = this;\n\n      var filters = {};\n      this.getFilteredValueColumns(columns).forEach(function (col) {\n        var colKey = _this5.getColumnKey(col);\n        filters[colKey] = col.filteredValue;\n      });\n      return filters;\n    }\n  }, {\n    key: 'getDefaultSortOrder',\n    value: function getDefaultSortOrder(columns) {\n      var definedSortState = this.getSortStateFromColumns(columns);\n      var defaultSortedColumn = (0, _util.flatFilter)(columns || [], function (column) {\n        return column.defaultSortOrder != null;\n      })[0];\n      if (defaultSortedColumn && !definedSortState.sortColumn) {\n        return {\n          sortColumn: defaultSortedColumn,\n          sortOrder: defaultSortedColumn.defaultSortOrder\n        };\n      }\n      return definedSortState;\n    }\n  }, {\n    key: 'getSortStateFromColumns',\n    value: function getSortStateFromColumns(columns) {\n      // return first column which sortOrder is not falsy\n      var sortedColumn = this.getSortOrderColumns(columns).filter(function (col) {\n        return col.sortOrder;\n      })[0];\n      if (sortedColumn) {\n        return {\n          sortColumn: sortedColumn,\n          sortOrder: sortedColumn.sortOrder\n        };\n      }\n      return {\n        sortColumn: null,\n        sortOrder: null\n      };\n    }\n  }, {\n    key: 'getSorterFn',\n    value: function getSorterFn() {\n      var _state = this.state,\n          sortOrder = _state.sortOrder,\n          sortColumn = _state.sortColumn;\n\n      if (!sortOrder || !sortColumn || typeof sortColumn.sorter !== 'function') {\n        return;\n      }\n      return function (a, b) {\n        var result = sortColumn.sorter(a, b);\n        if (result !== 0) {\n          return sortOrder === 'descend' ? -result : result;\n        }\n        return 0;\n      };\n    }\n  }, {\n    key: 'toggleSortOrder',\n    value: function toggleSortOrder(order, column) {\n      var _state2 = this.state,\n          sortColumn = _state2.sortColumn,\n          sortOrder = _state2.sortOrder;\n      // 只同时允许一列进行排序，否则会导致排序顺序的逻辑问题\n\n      var isSortColumn = this.isSortColumn(column);\n      if (!isSortColumn) {\n        sortOrder = order;\n        sortColumn = column;\n      } else {\n        if (sortOrder === order) {\n          sortOrder = '';\n          sortColumn = null;\n        } else {\n          sortOrder = order;\n        }\n      }\n      var newState = {\n        sortOrder: sortOrder,\n        sortColumn: sortColumn\n      };\n      // Controlled\n      if (this.getSortOrderColumns().length === 0) {\n        this.setState(newState);\n      }\n      var onChange = this.props.onChange;\n      if (onChange) {\n        onChange.apply(null, this.prepareParamsArguments((0, _extends3.default)({}, this.state, newState)));\n      }\n    }\n  }, {\n    key: 'renderRowSelection',\n    value: function renderRowSelection(locale) {\n      var _this6 = this;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          rowSelection = _props.rowSelection;\n\n      var columns = this.columns.concat();\n      if (rowSelection) {\n        var data = this.getFlatCurrentPageData().filter(function (item, index) {\n          if (rowSelection.getCheckboxProps) {\n            return !_this6.getCheckboxPropsByItem(item, index).disabled;\n          }\n          return true;\n        });\n        var selectionColumnClass = (0, _classnames2.default)(prefixCls + '-selection-column', (0, _defineProperty3.default)({}, prefixCls + '-selection-column-custom', rowSelection.selections));\n        var selectionColumn = {\n          key: 'selection-column',\n          render: this.renderSelectionBox(rowSelection.type),\n          className: selectionColumnClass,\n          fixed: rowSelection.fixed\n        };\n        if (rowSelection.type !== 'radio') {\n          var checkboxAllDisabled = data.every(function (item, index) {\n            return _this6.getCheckboxPropsByItem(item, index).disabled;\n          });\n          selectionColumn.title = React.createElement(_SelectionCheckboxAll2.default, { store: this.store, locale: locale, data: data, getCheckboxPropsByItem: this.getCheckboxPropsByItem, getRecordKey: this.getRecordKey, disabled: checkboxAllDisabled, prefixCls: prefixCls, onSelect: this.handleSelectRow, selections: rowSelection.selections, hideDefaultSelections: rowSelection.hideDefaultSelections, getPopupContainer: this.getPopupContainer });\n        }\n        if ('fixed' in rowSelection) {\n          selectionColumn.fixed = rowSelection.fixed;\n        } else if (columns.some(function (column) {\n          return column.fixed === 'left' || column.fixed === true;\n        })) {\n          selectionColumn.fixed = 'left';\n        }\n        if (columns[0] && columns[0].key === 'selection-column') {\n          columns[0] = selectionColumn;\n        } else {\n          columns.unshift(selectionColumn);\n        }\n      }\n      return columns;\n    }\n  }, {\n    key: 'getColumnKey',\n    value: function getColumnKey(column, index) {\n      return column.key || column.dataIndex || index;\n    }\n  }, {\n    key: 'getMaxCurrent',\n    value: function getMaxCurrent(total) {\n      var _state$pagination = this.state.pagination,\n          current = _state$pagination.current,\n          pageSize = _state$pagination.pageSize;\n\n      if ((current - 1) * pageSize >= total) {\n        return Math.floor((total - 1) / pageSize) + 1;\n      }\n      return current;\n    }\n  }, {\n    key: 'isSortColumn',\n    value: function isSortColumn(column) {\n      var sortColumn = this.state.sortColumn;\n\n      if (!column || !sortColumn) {\n        return false;\n      }\n      return this.getColumnKey(sortColumn) === this.getColumnKey(column);\n    }\n  }, {\n    key: 'renderColumnsDropdown',\n    value: function renderColumnsDropdown(columns, locale) {\n      var _this7 = this;\n\n      var _props2 = this.props,\n          prefixCls = _props2.prefixCls,\n          dropdownPrefixCls = _props2.dropdownPrefixCls;\n      var sortOrder = this.state.sortOrder;\n\n      return (0, _util.treeMap)(columns, function (originColumn, i) {\n        var column = (0, _extends3.default)({}, originColumn);\n        var key = _this7.getColumnKey(column, i);\n        var filterDropdown = void 0;\n        var sortButton = void 0;\n        if (column.filters && column.filters.length > 0 || column.filterDropdown) {\n          var colFilters = _this7.state.filters[key] || [];\n          filterDropdown = React.createElement(_filterDropdown2.default, { locale: locale, column: column, selectedKeys: colFilters, confirmFilter: _this7.handleFilter, prefixCls: prefixCls + '-filter', dropdownPrefixCls: dropdownPrefixCls || 'ant-dropdown', getPopupContainer: _this7.getPopupContainer });\n        }\n        if (column.sorter) {\n          var isSortColumn = _this7.isSortColumn(column);\n          if (isSortColumn) {\n            column.className = (0, _classnames2.default)(column.className, (0, _defineProperty3.default)({}, prefixCls + '-column-sort', sortOrder));\n          }\n          var isAscend = isSortColumn && sortOrder === 'ascend';\n          var isDescend = isSortColumn && sortOrder === 'descend';\n          sortButton = React.createElement('div', { className: prefixCls + '-column-sorter' }, React.createElement('span', { className: prefixCls + '-column-sorter-up ' + (isAscend ? 'on' : 'off'), title: \"\\u2191\", onClick: function onClick() {\n              return _this7.toggleSortOrder('ascend', column);\n            } }, React.createElement(_icon2.default, { type: 'caret-up' })), React.createElement('span', { className: prefixCls + '-column-sorter-down ' + (isDescend ? 'on' : 'off'), title: \"\\u2193\", onClick: function onClick() {\n              return _this7.toggleSortOrder('descend', column);\n            } }, React.createElement(_icon2.default, { type: 'caret-down' })));\n        }\n        column.title = React.createElement('span', null, column.title, sortButton, filterDropdown);\n        return column;\n      });\n    }\n  }, {\n    key: 'renderPagination',\n    value: function renderPagination() {\n      // 强制不需要分页\n      if (!this.hasPagination()) {\n        return null;\n      }\n      var size = 'default';\n      var pagination = this.state.pagination;\n\n      if (pagination.size) {\n        size = pagination.size;\n      } else if (this.props.size === 'middle' || this.props.size === 'small') {\n        size = 'small';\n      }\n      var total = pagination.total || this.getLocalData().length;\n      return total > 0 ? React.createElement(_pagination2.default, (0, _extends3.default)({ key: 'pagination' }, pagination, { className: (0, _classnames2.default)(pagination.className, this.props.prefixCls + '-pagination'), onChange: this.handlePageChange, total: total, size: size, current: this.getMaxCurrent(total), onShowSizeChange: this.handleShowSizeChange })) : null;\n    }\n    // Get pagination, filters, sorter\n\n  }, {\n    key: 'prepareParamsArguments',\n    value: function prepareParamsArguments(state) {\n      var pagination = (0, _extends3.default)({}, state.pagination);\n      // remove useless handle function in Table.onChange\n      delete pagination.onChange;\n      delete pagination.onShowSizeChange;\n      var filters = state.filters;\n      var sorter = {};\n      if (state.sortColumn && state.sortOrder) {\n        sorter.column = state.sortColumn;\n        sorter.order = state.sortOrder;\n        sorter.field = state.sortColumn.dataIndex;\n        sorter.columnKey = this.getColumnKey(state.sortColumn);\n      }\n      return [pagination, filters, sorter];\n    }\n  }, {\n    key: 'findColumn',\n    value: function findColumn(myKey) {\n      var _this8 = this;\n\n      var column = void 0;\n      (0, _util.treeMap)(this.columns, function (c) {\n        if (_this8.getColumnKey(c) === myKey) {\n          column = c;\n        }\n      });\n      return column;\n    }\n  }, {\n    key: 'getCurrentPageData',\n    value: function getCurrentPageData() {\n      var data = this.getLocalData();\n      var current = void 0;\n      var pageSize = void 0;\n      var state = this.state;\n      // 如果没有分页的话，默认全部展示\n      if (!this.hasPagination()) {\n        pageSize = Number.MAX_VALUE;\n        current = 1;\n      } else {\n        pageSize = state.pagination.pageSize;\n        current = this.getMaxCurrent(state.pagination.total || data.length);\n      }\n      // 分页\n      // ---\n      // 当数据量少于等于每页数量时，直接设置数据\n      // 否则进行读取分页数据\n      if (data.length > pageSize || pageSize === Number.MAX_VALUE) {\n        data = data.filter(function (_, i) {\n          return i >= (current - 1) * pageSize && i < current * pageSize;\n        });\n      }\n      return data;\n    }\n  }, {\n    key: 'getFlatData',\n    value: function getFlatData() {\n      return (0, _util.flatArray)(this.getLocalData());\n    }\n  }, {\n    key: 'getFlatCurrentPageData',\n    value: function getFlatCurrentPageData() {\n      return (0, _util.flatArray)(this.getCurrentPageData());\n    }\n  }, {\n    key: 'recursiveSort',\n    value: function recursiveSort(data, sorterFn) {\n      var _this9 = this;\n\n      var _props$childrenColumn = this.props.childrenColumnName,\n          childrenColumnName = _props$childrenColumn === undefined ? 'children' : _props$childrenColumn;\n\n      return data.sort(sorterFn).map(function (item) {\n        return item[childrenColumnName] ? (0, _extends3.default)({}, item, (0, _defineProperty3.default)({}, childrenColumnName, _this9.recursiveSort(item[childrenColumnName], sorterFn))) : item;\n      });\n    }\n  }, {\n    key: 'getLocalData',\n    value: function getLocalData() {\n      var _this10 = this;\n\n      var state = this.state;\n      var dataSource = this.props.dataSource;\n\n      var data = dataSource || [];\n      // 优化本地排序\n      data = data.slice(0);\n      var sorterFn = this.getSorterFn();\n      if (sorterFn) {\n        data = this.recursiveSort(data, sorterFn);\n      }\n      // 筛选\n      if (state.filters) {\n        Object.keys(state.filters).forEach(function (columnKey) {\n          var col = _this10.findColumn(columnKey);\n          if (!col) {\n            return;\n          }\n          var values = state.filters[columnKey] || [];\n          if (values.length === 0) {\n            return;\n          }\n          var onFilter = col.onFilter;\n          data = onFilter ? data.filter(function (record) {\n            return values.some(function (v) {\n              return onFilter(v, record);\n            });\n          }) : data;\n        });\n      }\n      return data;\n    }\n  }, {\n    key: 'createComponents',\n    value: function createComponents() {\n      var components = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var prevComponents = arguments[1];\n\n      var bodyRow = components && components.body && components.body.row;\n      var preBodyRow = prevComponents && prevComponents.body && prevComponents.body.row;\n      if (!this.components || bodyRow !== preBodyRow) {\n        this.components = (0, _extends3.default)({}, components);\n        this.components.body = (0, _extends3.default)({}, components.body, { row: (0, _createBodyRow2.default)(bodyRow) });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props3 = this.props,\n          style = _props3.style,\n          className = _props3.className,\n          prefixCls = _props3.prefixCls;\n\n      var data = this.getCurrentPageData();\n      var table = React.createElement(_LocaleReceiver2.default, { componentName: 'Table', defaultLocale: _default2.default.Table }, this.renderTable);\n      // if there is no pagination or no data,\n      // the height of spin should decrease by half of pagination\n      var paginationPatchClass = this.hasPagination() && data && data.length !== 0 ? prefixCls + '-with-pagination' : prefixCls + '-without-pagination';\n      var loading = this.props.loading;\n      if (typeof loading === 'boolean') {\n        loading = {\n          spinning: loading\n        };\n      }\n      return React.createElement('div', { className: (0, _classnames2.default)(prefixCls + '-wrapper', className), style: style }, React.createElement(_spin2.default, (0, _extends3.default)({}, loading, { className: loading ? paginationPatchClass + ' ' + prefixCls + '-spin-holder' : '' }), table, this.renderPagination()));\n    }\n  }]);\n\n  return Table;\n}(React.Component);\n\nexports.default = Table;\n\n\nTable.Column = _Column2.default;\nTable.ColumnGroup = _ColumnGroup2.default;\nTable.propTypes = {\n  dataSource: _propTypes2.default.array,\n  columns: _propTypes2.default.array,\n  prefixCls: _propTypes2.default.string,\n  useFixedHeader: _propTypes2.default.bool,\n  rowSelection: _propTypes2.default.object,\n  className: _propTypes2.default.string,\n  size: _propTypes2.default.string,\n  loading: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.object]),\n  bordered: _propTypes2.default.bool,\n  onChange: _propTypes2.default.func,\n  locale: _propTypes2.default.object,\n  dropdownPrefixCls: _propTypes2.default.string\n};\nTable.defaultProps = {\n  dataSource: [],\n  prefixCls: 'ant-table',\n  useFixedHeader: false,\n  rowSelection: null,\n  className: '',\n  size: 'large',\n  loading: false,\n  bordered: false,\n  indentSize: 20,\n  locale: {},\n  rowKey: 'key',\n  showHeader: true\n};"},"hash":"c5e304eb58ebb0ac90eeb9a4ca785ce6"}