{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":3,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":4,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":5,"column":22}},{"name":"react","loc":{"line":6,"column":23}},{"name":"rc-animate","loc":{"line":7,"column":20}},{"name":"rc-util/es/Dom/addEventListener","loc":{"line":8,"column":29}},{"name":"classnames","loc":{"line":9,"column":23}},{"name":"omit.js","loc":{"line":10,"column":17}},{"name":"../_util/getScroll","loc":{"line":11,"column":22}},{"name":"../_util/getRequestAnimationFrame","loc":{"line":12,"column":37}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _rcAnimate = require(\"rc-animate\");\n\nvar _rcAnimate2 = _interopRequireDefault(_rcAnimate);\n\nvar _addEventListener = require(\"rc-util/es/Dom/addEventListener\");\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _classnames = require(\"classnames\");\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _omit = require(\"omit.js\");\n\nvar _omit2 = _interopRequireDefault(_omit);\n\nvar _getScroll = require(\"../_util/getScroll\");\n\nvar _getScroll2 = _interopRequireDefault(_getScroll);\n\nvar _getRequestAnimationFrame = require(\"../_util/getRequestAnimationFrame\");\n\nvar _getRequestAnimationFrame2 = _interopRequireDefault(_getRequestAnimationFrame);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar reqAnimFrame = (0, _getRequestAnimationFrame2.default)();\nvar easeInOutCubic = function easeInOutCubic(t, b, c, d) {\n  var cc = c - b;\n  t /= d / 2;\n  if (t < 1) {\n    return cc / 2 * t * t * t + b;\n  } else {\n    return cc / 2 * ((t -= 2) * t * t + 2) + b;\n  }\n};\nfunction noop() {}\nfunction getDefaultTarget() {\n  return window;\n}\n\nvar BackTop = function (_React$Component) {\n  (0, _inherits3.default)(BackTop, _React$Component);\n\n  function BackTop(props) {\n    (0, _classCallCheck3.default)(this, BackTop);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (BackTop.__proto__ || Object.getPrototypeOf(BackTop)).call(this, props));\n\n    _this.getCurrentScrollTop = function () {\n      var getTarget = _this.props.target || getDefaultTarget;\n      var targetNode = getTarget();\n      if (targetNode === window) {\n        return window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n      }\n      return targetNode.scrollTop;\n    };\n    _this.scrollToTop = function (e) {\n      var scrollTop = _this.getCurrentScrollTop();\n      var startTime = Date.now();\n      var frameFunc = function frameFunc() {\n        var timestamp = Date.now();\n        var time = timestamp - startTime;\n        _this.setScrollTop(easeInOutCubic(time, scrollTop, 0, 450));\n        if (time < 450) {\n          reqAnimFrame(frameFunc);\n        }\n      };\n      reqAnimFrame(frameFunc);\n      (_this.props.onClick || noop)(e);\n    };\n    _this.handleScroll = function () {\n      var _this$props = _this.props,\n          visibilityHeight = _this$props.visibilityHeight,\n          _this$props$target = _this$props.target,\n          target = _this$props$target === undefined ? getDefaultTarget : _this$props$target;\n\n      var scrollTop = (0, _getScroll2.default)(target(), true);\n      _this.setState({\n        visible: scrollTop > visibilityHeight\n      });\n    };\n    _this.state = {\n      visible: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(BackTop, [{\n    key: 'setScrollTop',\n    value: function setScrollTop(value) {\n      var getTarget = this.props.target || getDefaultTarget;\n      var targetNode = getTarget();\n      if (targetNode === window) {\n        document.body.scrollTop = value;\n        document.documentElement.scrollTop = value;\n      } else {\n        targetNode.scrollTop = value;\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var getTarget = this.props.target || getDefaultTarget;\n      this.scrollEvent = (0, _addEventListener2.default)(getTarget(), 'scroll', this.handleScroll);\n      this.handleScroll();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.scrollEvent) {\n        this.scrollEvent.remove();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          _props$prefixCls = _props.prefixCls,\n          prefixCls = _props$prefixCls === undefined ? 'ant-back-top' : _props$prefixCls,\n          _props$className = _props.className,\n          className = _props$className === undefined ? '' : _props$className,\n          children = _props.children;\n\n      var classString = (0, _classnames2.default)(prefixCls, className);\n      var defaultElement = React.createElement('div', { className: prefixCls + '-content' }, React.createElement('div', { className: prefixCls + '-icon' }));\n      // fix https://fb.me/react-unknown-prop\n      var divProps = (0, _omit2.default)(this.props, ['prefixCls', 'className', 'children', 'visibilityHeight', 'target']);\n      var backTopBtn = this.state.visible ? React.createElement('div', (0, _extends3.default)({}, divProps, { className: classString, onClick: this.scrollToTop }), children || defaultElement) : null;\n      return React.createElement(_rcAnimate2.default, { component: '', transitionName: 'fade' }, backTopBtn);\n    }\n  }]);\n\n  return BackTop;\n}(React.Component);\n\nexports.default = BackTop;\n\n\nBackTop.defaultProps = {\n  visibilityHeight: 400\n};"},"hash":"9c2c2b34fbf79a01c1ce38bc5c7c51dd"}