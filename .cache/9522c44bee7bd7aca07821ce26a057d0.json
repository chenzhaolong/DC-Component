{"dependencies":[{"name":"babel-runtime/helpers/defineProperty","loc":{"line":1,"column":28}},{"name":"classnames","loc":{"line":2,"column":23}},{"name":"./utils","loc":{"line":3,"column":51}},{"name":"react","loc":{"line":4,"column":18}},{"name":"rc-util/es/Dom/addEventListener","loc":{"line":5,"column":29}},{"name":"lodash.debounce","loc":{"line":6,"column":21}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require(\"babel-runtime/helpers/defineProperty\");\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classnames5 = require(\"classnames\");\n\nvar _classnames6 = _interopRequireDefault(_classnames5);\n\nvar _utils = require(\"./utils\");\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _addEventListener = require(\"rc-util/es/Dom/addEventListener\");\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _lodash = require(\"lodash.debounce\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  getDefaultProps: function getDefaultProps() {\n    return {\n      scrollAnimated: true,\n      onPrevClick: function onPrevClick() {},\n      onNextClick: function onNextClick() {}\n    };\n  },\n  getInitialState: function getInitialState() {\n    this.offset = 0;\n    return {\n      next: false,\n      prev: false\n    };\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n\n    this.componentDidUpdate();\n    var debouncedResize = (0, _lodash2.default)(function () {\n      _this.setNextPrev();\n      _this.scrollToActiveTab();\n    }, 200);\n    this.resizeEvent = (0, _addEventListener2.default)(window, 'resize', debouncedResize);\n  },\n  componentDidUpdate: function componentDidUpdate(prevProps) {\n    var props = this.props;\n    if (prevProps && prevProps.tabBarPosition !== props.tabBarPosition) {\n      this.setOffset(0);\n      return;\n    }\n    var nextPrev = this.setNextPrev();\n\n    if (this.isNextPrevShown(this.state) !== this.isNextPrevShown(nextPrev)) {\n      this.setState({}, this.scrollToActiveTab);\n    } else if (!prevProps || props.activeKey !== prevProps.activeKey) {\n      this.scrollToActiveTab();\n    }\n  },\n  componentWillUnmount: function componentWillUnmount() {\n    if (this.resizeEvent) {\n      this.resizeEvent.remove();\n    }\n  },\n  setNextPrev: function setNextPrev() {\n    var navNode = this.nav;\n    var navNodeWH = this.getOffsetWH(navNode);\n    var navWrapNode = this.navWrap;\n    var navWrapNodeWH = this.getOffsetWH(navWrapNode);\n    var offset = this.offset;\n\n    var minOffset = navWrapNodeWH - navNodeWH;\n    var _state = this.state,\n        next = _state.next,\n        prev = _state.prev;\n\n    if (minOffset >= 0) {\n      next = false;\n      this.setOffset(0, false);\n      offset = 0;\n    } else if (minOffset < offset) {\n      next = true;\n    } else {\n      next = false;\n      this.setOffset(minOffset, false);\n      offset = minOffset;\n    }\n\n    if (offset < 0) {\n      prev = true;\n    } else {\n      prev = false;\n    }\n\n    this.setNext(next);\n    this.setPrev(prev);\n    return {\n      next: next,\n      prev: prev\n    };\n  },\n  getOffsetWH: function getOffsetWH(node) {\n    var tabBarPosition = this.props.tabBarPosition;\n    var prop = 'offsetWidth';\n    if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n      prop = 'offsetHeight';\n    }\n    return node[prop];\n  },\n  getOffsetLT: function getOffsetLT(node) {\n    var tabBarPosition = this.props.tabBarPosition;\n    var prop = 'left';\n    if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n      prop = 'top';\n    }\n    return node.getBoundingClientRect()[prop];\n  },\n  setOffset: function setOffset(offset) {\n    var checkNextPrev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    var target = Math.min(0, offset);\n    if (this.offset !== target) {\n      this.offset = target;\n      var navOffset = {};\n      var tabBarPosition = this.props.tabBarPosition;\n      var navStyle = this.nav.style;\n      var transformSupported = (0, _utils.isTransformSupported)(navStyle);\n      if (tabBarPosition === 'left' || tabBarPosition === 'right') {\n        if (transformSupported) {\n          navOffset = {\n            value: 'translate3d(0,' + target + 'px,0)'\n          };\n        } else {\n          navOffset = {\n            name: 'top',\n            value: target + 'px'\n          };\n        }\n      } else {\n        if (transformSupported) {\n          navOffset = {\n            value: 'translate3d(' + target + 'px,0,0)'\n          };\n        } else {\n          navOffset = {\n            name: 'left',\n            value: target + 'px'\n          };\n        }\n      }\n      if (transformSupported) {\n        (0, _utils.setTransform)(navStyle, navOffset.value);\n      } else {\n        navStyle[navOffset.name] = navOffset.value;\n      }\n      if (checkNextPrev) {\n        this.setNextPrev();\n      }\n    }\n  },\n  setPrev: function setPrev(v) {\n    if (this.state.prev !== v) {\n      this.setState({\n        prev: v\n      });\n    }\n  },\n  setNext: function setNext(v) {\n    if (this.state.next !== v) {\n      this.setState({\n        next: v\n      });\n    }\n  },\n  isNextPrevShown: function isNextPrevShown(state) {\n    if (state) {\n      return state.next || state.prev;\n    }\n    return this.state.next || this.state.prev;\n  },\n  prevTransitionEnd: function prevTransitionEnd(e) {\n    if (e.propertyName !== 'opacity') {\n      return;\n    }\n    var container = this.container;\n\n    this.scrollToActiveTab({\n      target: container,\n      currentTarget: container\n    });\n  },\n  scrollToActiveTab: function scrollToActiveTab(e) {\n    var activeTab = this.activeTab,\n        navWrap = this.navWrap;\n\n    if (e && e.target !== e.currentTarget || !activeTab) {\n      return;\n    }\n\n    var needToSroll = this.isNextPrevShown() && this.lastNextPrevShown;\n    this.lastNextPrevShown = this.isNextPrevShown();\n    if (!needToSroll) {\n      return;\n    }\n\n    var activeTabWH = this.getOffsetWH(activeTab);\n    var navWrapNodeWH = this.getOffsetWH(navWrap);\n    var offset = this.offset;\n\n    var wrapOffset = this.getOffsetLT(navWrap);\n    var activeTabOffset = this.getOffsetLT(activeTab);\n    if (wrapOffset > activeTabOffset) {\n      offset += wrapOffset - activeTabOffset;\n      this.setOffset(offset);\n    } else if (wrapOffset + navWrapNodeWH < activeTabOffset + activeTabWH) {\n      offset -= activeTabOffset + activeTabWH - (wrapOffset + navWrapNodeWH);\n      this.setOffset(offset);\n    }\n  },\n  prev: function prev(e) {\n    this.props.onPrevClick(e);\n    var navWrapNode = this.navWrap;\n    var navWrapNodeWH = this.getOffsetWH(navWrapNode);\n    var offset = this.offset;\n\n    this.setOffset(offset + navWrapNodeWH);\n  },\n  next: function next(e) {\n    this.props.onNextClick(e);\n    var navWrapNode = this.navWrap;\n    var navWrapNodeWH = this.getOffsetWH(navWrapNode);\n    var offset = this.offset;\n\n    this.setOffset(offset - navWrapNodeWH);\n  },\n  getScrollBarNode: function getScrollBarNode(content) {\n    var _classnames, _classnames2, _classnames3, _classnames4;\n\n    var _state2 = this.state,\n        next = _state2.next,\n        prev = _state2.prev;\n    var _props = this.props,\n        prefixCls = _props.prefixCls,\n        scrollAnimated = _props.scrollAnimated;\n\n    var showNextPrev = prev || next;\n\n    var prevButton = _react2.default.createElement('span', {\n      onClick: prev ? this.prev : null,\n      unselectable: 'unselectable',\n      className: (0, _classnames6.default)((_classnames = {}, (0, _defineProperty3.default)(_classnames, prefixCls + '-tab-prev', 1), (0, _defineProperty3.default)(_classnames, prefixCls + '-tab-btn-disabled', !prev), (0, _defineProperty3.default)(_classnames, prefixCls + '-tab-arrow-show', showNextPrev), _classnames)),\n      onTransitionEnd: this.prevTransitionEnd\n    }, _react2.default.createElement('span', { className: prefixCls + '-tab-prev-icon' }));\n\n    var nextButton = _react2.default.createElement('span', {\n      onClick: next ? this.next : null,\n      unselectable: 'unselectable',\n      className: (0, _classnames6.default)((_classnames2 = {}, (0, _defineProperty3.default)(_classnames2, prefixCls + '-tab-next', 1), (0, _defineProperty3.default)(_classnames2, prefixCls + '-tab-btn-disabled', !next), (0, _defineProperty3.default)(_classnames2, prefixCls + '-tab-arrow-show', showNextPrev), _classnames2))\n    }, _react2.default.createElement('span', { className: prefixCls + '-tab-next-icon' }));\n\n    var navClassName = prefixCls + '-nav';\n    var navClasses = (0, _classnames6.default)((_classnames3 = {}, (0, _defineProperty3.default)(_classnames3, navClassName, true), (0, _defineProperty3.default)(_classnames3, scrollAnimated ? navClassName + '-animated' : navClassName + '-no-animated', true), _classnames3));\n\n    return _react2.default.createElement('div', {\n      className: (0, _classnames6.default)((_classnames4 = {}, (0, _defineProperty3.default)(_classnames4, prefixCls + '-nav-container', 1), (0, _defineProperty3.default)(_classnames4, prefixCls + '-nav-container-scrolling', showNextPrev), _classnames4)),\n      key: 'container',\n      ref: this.saveRef('container')\n    }, prevButton, nextButton, _react2.default.createElement('div', { className: prefixCls + '-nav-wrap', ref: this.saveRef('navWrap') }, _react2.default.createElement('div', { className: prefixCls + '-nav-scroll' }, _react2.default.createElement('div', { className: navClasses, ref: this.saveRef('nav') }, content))));\n  }\n};"},"hash":"b314beb838ea93d2e15d513bdaa7e1fd"}