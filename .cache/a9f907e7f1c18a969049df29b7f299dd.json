{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"babel-runtime/helpers/defineProperty","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":3,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":4,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":5,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":6,"column":22}},{"name":"babel-runtime/helpers/slicedToArray","loc":{"line":7,"column":27}},{"name":"react","loc":{"line":9,"column":23}},{"name":"moment","loc":{"line":10,"column":24}},{"name":"rc-calendar/es/RangeCalendar","loc":{"line":11,"column":26}},{"name":"rc-calendar/es/Picker","loc":{"line":12,"column":25}},{"name":"classnames","loc":{"line":13,"column":23}},{"name":"../icon","loc":{"line":14,"column":17}},{"name":"../_util/warning","loc":{"line":15,"column":20}},{"name":"../_util/callMoment","loc":{"line":16,"column":23}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require(\"babel-runtime/helpers/defineProperty\");\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _slicedToArray2 = require(\"babel-runtime/helpers/slicedToArray\");\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _moment = require(\"moment\");\n\nvar moment = _interopRequireWildcard(_moment);\n\nvar _RangeCalendar = require(\"rc-calendar/es/RangeCalendar\");\n\nvar _RangeCalendar2 = _interopRequireDefault(_RangeCalendar);\n\nvar _Picker = require(\"rc-calendar/es/Picker\");\n\nvar _Picker2 = _interopRequireDefault(_Picker);\n\nvar _classnames = require(\"classnames\");\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _icon = require(\"../icon\");\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nvar _warning = require(\"../_util/warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _callMoment = require(\"../_util/callMoment\");\n\nvar _callMoment2 = _interopRequireDefault(_callMoment);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* tslint:disable jsx-no-multiline-js */\nfunction getShowDateFromValue(value) {\n  var _value = (0, _slicedToArray3.default)(value, 2),\n      start = _value[0],\n      end = _value[1];\n  // value could be an empty array, then we should not reset showDate\n\n\n  if (!start && !end) {\n    return;\n  }\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\nfunction formatValue(value, format) {\n  return value && value.format(format) || '';\n}\nfunction pickerValueAdapter(value) {\n  if (!value) {\n    return;\n  }\n  if (Array.isArray(value)) {\n    return value;\n  }\n  return [value, value.clone().add(1, 'month')];\n}\nfunction isEmptyArray(arr) {\n  if (Array.isArray(arr)) {\n    return arr.length === 0 || arr.every(function (i) {\n      return !i;\n    });\n  }\n  return false;\n}\n\nvar RangePicker = function (_React$Component) {\n  (0, _inherits3.default)(RangePicker, _React$Component);\n\n  function RangePicker(props) {\n    (0, _classCallCheck3.default)(this, RangePicker);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (RangePicker.__proto__ || Object.getPrototypeOf(RangePicker)).call(this, props));\n\n    _this.clearSelection = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      _this.setState({ value: [] });\n      _this.handleChange([]);\n    };\n    _this.clearHoverValue = function () {\n      return _this.setState({ hoverValue: [] });\n    };\n    _this.handleChange = function (value) {\n      var props = _this.props;\n      if (!('value' in props)) {\n        _this.setState(function (_ref) {\n          var showDate = _ref.showDate;\n          return {\n            value: value,\n            showDate: getShowDateFromValue(value) || showDate\n          };\n        });\n      }\n      props.onChange(value, [formatValue(value[0], props.format), formatValue(value[1], props.format)]);\n    };\n    _this.handleOpenChange = function (open) {\n      if (!('open' in _this.props)) {\n        _this.setState({ open: open });\n      }\n      var onOpenChange = _this.props.onOpenChange;\n\n      if (onOpenChange) {\n        onOpenChange(open);\n      }\n    };\n    _this.handleShowDateChange = function (showDate) {\n      return _this.setState({ showDate: showDate });\n    };\n    _this.handleHoverChange = function (hoverValue) {\n      return _this.setState({ hoverValue: hoverValue });\n    };\n    _this.savePicker = function (node) {\n      _this.picker = node;\n    };\n    _this.renderFooter = function () {\n      var _this$props = _this.props,\n          prefixCls = _this$props.prefixCls,\n          ranges = _this$props.ranges,\n          renderExtraFooter = _this$props.renderExtraFooter;\n\n      if (!ranges && !renderExtraFooter) {\n        return null;\n      }\n      var customFooter = renderExtraFooter ? React.createElement('div', { className: prefixCls + '-footer-extra', key: 'extra' }, renderExtraFooter.apply(undefined, arguments)) : null;\n      var operations = Object.keys(ranges || {}).map(function (range) {\n        var value = ranges[range];\n        return React.createElement('a', { key: range, onClick: function onClick() {\n            return _this.setValue(value, true);\n          }, onMouseEnter: function onMouseEnter() {\n            return _this.setState({ hoverValue: value });\n          }, onMouseLeave: _this.clearHoverValue }, range);\n      });\n      var rangeNode = React.createElement('div', { className: prefixCls + '-footer-extra ' + prefixCls + '-range-quick-selector', key: 'range' }, operations);\n      return [rangeNode, customFooter];\n    };\n    var value = props.value || props.defaultValue || [];\n    if (value[0] && !moment.isMoment(value[0]) || value[1] && !moment.isMoment(value[1])) {\n      throw new Error('The value/defaultValue of RangePicker must be a moment object array after `antd@2.0`, ' + 'see: https://u.ant.design/date-picker-value');\n    }\n    var pickerValue = !value || isEmptyArray(value) ? props.defaultPickerValue : value;\n    _this.state = {\n      value: value,\n      showDate: pickerValueAdapter(pickerValue || (0, _callMoment2.default)(moment)),\n      open: props.open,\n      hoverValue: []\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(RangePicker, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ('value' in nextProps) {\n        var state = this.state;\n        var value = nextProps.value || [];\n        this.setState({\n          value: value,\n          showDate: getShowDateFromValue(value) || state.showDate\n        });\n      }\n      if ('open' in nextProps) {\n        this.setState({\n          open: nextProps.open\n        });\n      }\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(value, hidePanel) {\n      this.handleChange(value);\n      if ((hidePanel || !this.props.showTime) && !('open' in this.props)) {\n        this.setState({ open: false });\n      }\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      this.picker.focus();\n    }\n  }, {\n    key: 'blur',\n    value: function blur() {\n      this.picker.blur();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classNames,\n          _this2 = this;\n\n      var state = this.state,\n          props = this.props;\n      var value = state.value,\n          showDate = state.showDate,\n          hoverValue = state.hoverValue,\n          open = state.open;\n      var prefixCls = props.prefixCls,\n          popupStyle = props.popupStyle,\n          style = props.style,\n          disabledDate = props.disabledDate,\n          disabledTime = props.disabledTime,\n          showTime = props.showTime,\n          showToday = props.showToday,\n          ranges = props.ranges,\n          onOk = props.onOk,\n          locale = props.locale,\n          localeCode = props.localeCode,\n          format = props.format,\n          dateRender = props.dateRender,\n          onCalendarChange = props.onCalendarChange;\n\n      if (value && localeCode) {\n        if (value[0]) {\n          value[0].locale(localeCode);\n        }\n        if (value[1]) {\n          value[1].locale(localeCode);\n        }\n      }\n      (0, _warning2.default)(!('onOK' in props), 'It should be `RangePicker[onOk]`, instead of `onOK`!');\n      var calendarClassName = (0, _classnames2.default)((_classNames = {}, (0, _defineProperty3.default)(_classNames, prefixCls + '-time', showTime), (0, _defineProperty3.default)(_classNames, prefixCls + '-range-with-ranges', ranges), _classNames));\n      // 需要选择时间时，点击 ok 时才触发 onChange\n      var pickerChangeHandler = {\n        onChange: this.handleChange\n      };\n      var calendarProps = {\n        onOk: this.handleChange\n      };\n      if (props.timePicker) {\n        pickerChangeHandler.onChange = function (changedValue) {\n          return _this2.handleChange(changedValue);\n        };\n      } else {\n        calendarProps = {};\n      }\n      if ('mode' in props) {\n        calendarProps.mode = props.mode;\n      }\n      var startPlaceholder = 'placeholder' in props ? props.placeholder[0] : locale.lang.rangePlaceholder[0];\n      var endPlaceholder = 'placeholder' in props ? props.placeholder[1] : locale.lang.rangePlaceholder[1];\n      var calendar = React.createElement(_RangeCalendar2.default, (0, _extends3.default)({}, calendarProps, { onChange: onCalendarChange, format: format, prefixCls: prefixCls, className: calendarClassName, renderFooter: this.renderFooter, timePicker: props.timePicker, disabledDate: disabledDate, disabledTime: disabledTime, dateInputPlaceholder: [startPlaceholder, endPlaceholder], locale: locale.lang, onOk: onOk, dateRender: dateRender, value: showDate, onValueChange: this.handleShowDateChange, hoverValue: hoverValue, onHoverChange: this.handleHoverChange, onPanelChange: props.onPanelChange, showToday: showToday }));\n      // default width for showTime\n      var pickerStyle = {};\n      if (props.showTime) {\n        pickerStyle.width = style && style.width || 350;\n      }\n      var clearIcon = !props.disabled && props.allowClear && value && (value[0] || value[1]) ? React.createElement(_icon2.default, { type: 'cross-circle', className: prefixCls + '-picker-clear', onClick: this.clearSelection }) : null;\n      var input = function input(_ref2) {\n        var inputValue = _ref2.value;\n\n        var start = inputValue[0];\n        var end = inputValue[1];\n        return React.createElement('span', { className: props.pickerInputClass }, React.createElement('input', { disabled: props.disabled, readOnly: true, value: start && start.format(props.format) || '', placeholder: startPlaceholder, className: prefixCls + '-range-picker-input', tabIndex: -1 }), React.createElement('span', { className: prefixCls + '-range-picker-separator' }, ' ~ '), React.createElement('input', { disabled: props.disabled, readOnly: true, value: end && end.format(props.format) || '', placeholder: endPlaceholder, className: prefixCls + '-range-picker-input', tabIndex: -1 }), clearIcon, React.createElement('span', { className: prefixCls + '-picker-icon' }));\n      };\n      return React.createElement('span', { ref: this.savePicker, className: (0, _classnames2.default)(props.className, props.pickerClass), style: (0, _extends3.default)({}, style, pickerStyle), tabIndex: props.disabled ? -1 : 0, onFocus: props.onFocus, onBlur: props.onBlur }, React.createElement(_Picker2.default, (0, _extends3.default)({}, props, pickerChangeHandler, { calendar: calendar, value: value, open: open, onOpenChange: this.handleOpenChange, prefixCls: prefixCls + '-picker-container', style: popupStyle }), input));\n    }\n  }]);\n\n  return RangePicker;\n}(React.Component);\n\nexports.default = RangePicker;\n\n\nRangePicker.defaultProps = {\n  prefixCls: 'ant-calendar',\n  allowClear: true,\n  showToday: false\n};"},"hash":"277d6c0f1f1a59b86c326b7ab8ffbdd4"}